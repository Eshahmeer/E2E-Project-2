apiVersion: apps/v1
kind: Deployment
metadata:
  name: cypress
  namespace: demoproject
  labels:
    app: cypress
spec:
  replicas: 1
  selector:
    matchLabels:
      app: cypress
  template:
    metadata:
      labels:
        app: cypress
    spec:
      containers:
      - name: cypress
        image: cypress/browsers:node18.12.0-chrome107
        ports:
        - containerPort: 8080  # Assuming Cypress runs on port 8080
        workingDir: /project
        volumeMounts:
        - mountPath: /project
          name: project-volume
        - mountPath: /home/node/.cache/
          name: cache-volume
        env:
        - name: CYPRESS_API_URL
          value: "http://api:3456/api/v1"  # Update if necessary
        - name: CYPRESS_TEST_SECRET
          value: "averyLongSecretToSe33dtheDB"
      volumes:
      - name: project-volume
        hostPath:
          path: /path/to/your/project  # Update with the correct path
      - name: cache-volume
        hostPath:
          path: /path/to/your/cache  # Update with the correct path
